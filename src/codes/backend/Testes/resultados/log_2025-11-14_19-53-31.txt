
--- ğŸš€ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permissÃµes de sistema...
PermissÃµes nÃ£o encontradas. Criando permissÃµes padrÃ£o...
PermissÃµes padrÃ£o criadas com sucesso!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Nome            â”‚ DescriÃ§Ã£o                                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'ROOT'          â”‚ 'SuperusuÃ¡rio. Acesso irrestrito a todos os dados e configuraÃ§Ãµes do sistema.'                   â”‚
â”‚ 1       â”‚ 'ADMIN_COMPANY' â”‚ 'Administrador de uma empresa. Pode gerenciar usuÃ¡rios e todos os dados da sua prÃ³pria empresa.' â”‚
â”‚ 2       â”‚ 'USER_COMPANY'  â”‚ 'UsuÃ¡rio padrÃ£o. Pode criar e gerenciar seus prÃ³prios dados dentro da empresa.'                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â³ Iniciando servidor Smart GestÃ£o (startServer)...
ConexÃ£o com o MongoDB estabelecida com sucesso.
âœ… [1/1] ConexÃ£o com o banco de dados estabelecida!
âœ… Servidor rodando na porta 5000
--- âœ… [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:26416) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mPOST /api/auth/login [32m200[0m 102.507 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 92.831 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/logout [32m200[0m 18.869 ms - 108[0m
PASS Testes/1-auth/auth.test.js
  6. MÃ³dulo de AutenticaÃ§Ã£o e SessÃ£o (Stateful)
    âˆš deve criar um SessionToken no banco de dados apÃ³s o login (144 ms)
    âˆš deve invalidar o SessionToken no banco de dados apÃ³s o logout (120 ms)

  console.log
    
    --- Teste: Solicitar reset para e-mail invÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:25:13)

[LOG] AÃ§Ã£o: LOGOUT_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/forgot-password [33m404[0m 14.091 ms - 69[0m
  console.log
    âœ… Falhou como esperado para e-mail inexistente (Status 404).

      at Object.<anonymous> (Testes/1-auth/password.test.js:34:15)

  console.log
    
    --- Teste: Gerar token de reset com sucesso ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:39:13)

[0mPOST /api/auth/forgot-password [32m200[0m 31.522 ms - 164[0m
  console.log
    âœ… Token de reset gerado e salvo no banco de dados.

      at Object.<anonymous> (Testes/1-auth/password.test.js:49:13)

  console.log
    
    --- Teste: Resetar senha com token vÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:53:13)

[0mPOST /api/auth/forgot-password [32m200[0m 29.421 ms - 164[0m
[0mPOST /api/auth/reset-password/b1913c111c3edb3232bb46f7a59e2146253076c6ec62f1b7ea8bb8361ae5c2c3 [32m200[0m 95.235 ms - 68[0m
  console.log
    âœ… Senha resetada com sucesso via API.

      at Object.<anonymous> (Testes/1-auth/password.test.js:70:13)

[0mPOST /api/auth/reset-password/b1913c111c3edb3232bb46f7a59e2146253076c6ec62f1b7ea8bb8361ae5c2c3 [33m400[0m 13.846 ms - 72[0m
  console.log
    âœ… Token de reset foi invalidado no banco.

      at Object.<anonymous> (Testes/1-auth/password.test.js:74:13)

[0mPOST /api/auth/login [32m200[0m 108.885 ms - 688[0m
  console.log
    âœ… Login com a nova senha realizado com sucesso.

      at Object.<anonymous> (Testes/1-auth/password.test.js:84:13)

PASS Testes/1-auth/password.test.js
  9. MÃ³dulo de RecuperaÃ§Ã£o de Senha
    âˆš deve falhar ao solicitar reset para um e-mail inexistente (47 ms)
    âˆš deve gerar e salvar um token de reset para um e-mail vÃ¡lido (38 ms)
    âˆš deve resetar a senha com um token vÃ¡lido e permitir login com a nova senha (267 ms)

Test Suites: 2 passed, 2 total
Tests:       5 passed, 5 total
Snapshots:   0 total
Time:        1.153 s
Ran all test suites matching Testes/1-auth.

--- ğŸ§¹ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
   - [OK] Dados de teste temporÃ¡rios foram removidos.
âœ… Servidor e conexÃ£o com MongoDB encerrados (stopServer).
--- âœ… [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
