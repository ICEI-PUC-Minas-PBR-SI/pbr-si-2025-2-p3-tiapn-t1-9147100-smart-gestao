
--- ğŸš€ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permissÃµes de sistema...
PermissÃµes nÃ£o encontradas. Criando permissÃµes padrÃ£o...
PermissÃµes padrÃ£o criadas com sucesso!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Nome            â”‚ DescriÃ§Ã£o                                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'ROOT'          â”‚ 'SuperusuÃ¡rio. Acesso irrestrito a todos os dados e configuraÃ§Ãµes do sistema.'                   â”‚
â”‚ 1       â”‚ 'ADMIN_COMPANY' â”‚ 'Administrador de uma empresa. Pode gerenciar usuÃ¡rios e todos os dados da sua prÃ³pria empresa.' â”‚
â”‚ 2       â”‚ 'USER_COMPANY'  â”‚ 'UsuÃ¡rio padrÃ£o. Pode criar e gerenciar seus prÃ³prios dados dentro da empresa.'                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â³ Iniciando servidor Smart GestÃ£o (startServer)...
ConexÃ£o com o MongoDB estabelecida com sucesso.
âœ… [1/1] ConexÃ£o com o banco de dados estabelecida!
âœ… Servidor rodando na porta 5000
--- âœ… [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:32672) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mPOST /api/auth/login [32m200[0m 99.477 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 92.616 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/logout [32m200[0m 20.867 ms - 108[0m
PASS Testes/1-auth/auth.test.js
  6. MÃ³dulo de AutenticaÃ§Ã£o e SessÃ£o (Stateful)
    âˆš deve criar um SessionToken no banco de dados apÃ³s o login (136 ms)
    âˆš deve invalidar o SessionToken no banco de dados apÃ³s o logout (125 ms)

  console.log
    
    --- Teste: Solicitar reset para e-mail invÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:33:13)

[LOG] AÃ§Ã£o: LOGOUT_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/forgot-password [33m404[0m 14.436 ms - 69[0m
  console.log
    âœ… Falhou como esperado para e-mail inexistente (Status 404).

      at Object.<anonymous> (Testes/1-auth/password.test.js:42:15)

  console.log
    
    --- Teste: Gerar token de reset com sucesso ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:51:13)

[0mPOST /api/auth/forgot-password [32m200[0m 34.317 ms - 164[0m
  console.log
    âœ… Token de reset gerado e salvo no banco de dados.

      at Object.<anonymous> (Testes/1-auth/password.test.js:61:13)

  console.log
    
    --- Teste: Resetar senha com token vÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:70:13)

[0mPOST /api/auth/forgot-password [32m200[0m 31.589 ms - 164[0m
[0mPOST /api/auth/reset-password/37ddad8ae59180230c2af491fac3f5ecc7f30f214da1ab713c47e3c838b18225 [32m200[0m 111.951 ms - 68[0m
  console.log
    âœ… Senha resetada com sucesso via API.

      at Object.<anonymous> (Testes/1-auth/password.test.js:87:13)

[0mPOST /api/auth/reset-password/37ddad8ae59180230c2af491fac3f5ecc7f30f214da1ab713c47e3c838b18225 [33m400[0m 14.459 ms - 72[0m
  console.log
    âœ… Token de reset foi invalidado no banco.

      at Object.<anonymous> (Testes/1-auth/password.test.js:91:13)

[0mPOST /api/auth/login [32m200[0m 103.864 ms - 688[0m
  console.log
    âœ… Login com a nova senha realizado com sucesso.

      at Object.<anonymous> (Testes/1-auth/password.test.js:101:13)

PASS Testes/1-auth/password.test.js
  9. MÃ³dulo de RecuperaÃ§Ã£o de Senha
    âˆš deve falhar ao solicitar reset para um e-mail inexistente (49 ms)
    âˆš deve gerar e salvar um token de reset para um e-mail vÃ¡lido (39 ms)
    âˆš deve resetar a senha com um token vÃ¡lido e permitir login com a nova senha (280 ms)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/clients [32m201[0m 33.245 ms - 329[0m
[LOG] AÃ§Ã£o: CREATE_CLIENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mGET /api/clients [32m200[0m 28.433 ms - 563[0m
[0mPUT /api/clients/691cef79de026001a4e991c8 [32m200[0m 46.153 ms - 331[0m
[LOG] AÃ§Ã£o: UPDATE_CLIENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/clients/691cef79de026001a4e991c8 [32m200[0m 46.590 ms - 70[0m
PASS Testes/2-features/clients.test.js
  7. MÃ³dulo de Clientes/Fornecedores
    âˆš deve CRIAR um novo cliente com sucesso (46 ms)
    âˆš deve LISTAR os clientes da empresa (31 ms)
    âˆš deve ATUALIZAR um cliente existente (50 ms)
    âˆš deve EXCLUIR um cliente existente (50 ms)

[LOG] AÃ§Ã£o: DELETE_CLIENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: CREATE_META | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/goals [32m201[0m 55.164 ms - 404[0m
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mGET /api/goals [32m200[0m 27.230 ms - 406[0m
[LOG] AÃ§Ã£o: UPDATE_META | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPUT /api/goals/691cef7ade026001a4e991d9 [32m200[0m 60.164 ms - 414[0m
[LOG] AÃ§Ã£o: UPDATE_GOAL | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_META | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/goals/691cef7ade026001a4e991d9 [32m200[0m 61.991 ms - 67[0m
[0mGET /api/goals/null [33m404[0m 13.739 ms - 53[0m
[LOG] AÃ§Ã£o: DELETE_GOAL | UsuÃ¡rio: 691cef77de026001a4e9919b
PASS Testes/2-features/goals.test.js
  5. MÃ³dulo de Metas (CRUD)
    âˆš deve CRIAR uma nova meta com sucesso (71 ms)
    âˆš deve LISTAR as metas do usuÃ¡rio logado (31 ms)
    âˆš deve ATUALIZAR uma meta existente (63 ms)
    âˆš deve EXCLUIR uma meta existente (84 ms)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [32m201[0m 48.342 ms - 468[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [33m400[0m 14.278 ms - 277[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mGET /api/transactions [32m200[0m 27.528 ms - 855[0m
[0mGET /api/transactions/691cef7ade026001a4e991f1 [32m200[0m 39.921 ms - 452[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPUT /api/transactions/691cef7ade026001a4e991f1 [32m200[0m 60.753 ms - 452[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7ade026001a4e991f1 [32m200[0m 60.344 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mGET /api/transactions/691cef7ade026001a4e991f1 [33m404[0m 40.312 ms - 71[0m
PASS Testes/2-features/transactions.test.js
  4. MÃ³dulo de TransaÃ§Ãµes (CRUD)
    âˆš deve CRIAR uma nova transaÃ§Ã£o com sucesso (61 ms)
    âˆš deve falhar ao tentar criar uma transaÃ§Ã£o com dados invÃ¡lidos (20 ms)
    âˆš deve LISTAR as transaÃ§Ãµes do usuÃ¡rio logado (32 ms)
    âˆš deve OBTER uma transaÃ§Ã£o especÃ­fica pelo ID (42 ms)
    âˆš deve ATUALIZAR uma transaÃ§Ã£o existente (63 ms)
    âˆš deve EXCLUIR uma transaÃ§Ã£o existente (106 ms)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [32m201[0m 46.846 ms - 446[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions/691cef7ade026001a4e99212/upload [32m200[0m 61.171 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7ade026001a4e99212/upload [32m200[0m 58.592 ms - 442[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7ade026001a4e99212 [32m200[0m 74.606 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [32m201[0m 49.587 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions/691cef7bde026001a4e9922c/upload [32m200[0m 57.616 ms - 512[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e9922c/upload [32m200[0m 57.925 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e9922c [32m200[0m 60.364 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [32m201[0m 47.637 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions/691cef7bde026001a4e99246/upload [32m200[0m 59.056 ms - 512[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e99246/upload [32m200[0m 56.730 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e99246 [32m200[0m 59.513 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions [32m201[0m 47.862 ms - 445[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions/691cef7bde026001a4e99260/upload [32m200[0m 63.199 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e99260/upload [32m200[0m 61.822 ms - 441[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691cef77de026001a4e9919b
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mDELETE /api/transactions/691cef7bde026001a4e99260 [32m200[0m 61.204 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691cef77de026001a4e9919b
[0mPOST /api/transactions/60d5f1f77c3d4a001f5e8e1z/upload [33m404[0m 13.507 ms - 53[0m
PASS Testes/2-features/uploads.test.js
  Feature: Uploads
    Upload de PDF
      âˆš Deve permitir o upload de um anexo (PDF) para uma transaÃ§Ã£o (68 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo (PDF) de uma transaÃ§Ã£o (62 ms)
    Upload de Imagem (PNG)
      âˆš Deve permitir o upload de um anexo de imagem (.png) para uma transaÃ§Ã£o (62 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.png) (61 ms)
    Upload de Imagem (JPG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpg) para uma transaÃ§Ã£o (63 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpg) (61 ms)
    Upload de Imagem (JPEG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpeg) para uma transaÃ§Ã£o (69 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpeg) (67 ms)
    CenÃ¡rios de Erro e Estruturais
      âˆš Deve retornar 404 ao tentar fazer upload para uma transaÃ§Ã£o inexistente (18 ms)

  console.log
    
    --- Configurando 3 empresas para o teste multi-tenant ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:35:17)

[0mPOST /api/auth/register [32m201[0m 137.719 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 91.873 ms - 698[0m
  console.log
    âœ… Empresa 1 (Empresa Teste 1763503995981) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 142.096 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 91.643 ms - 698[0m
  console.log
    âœ… Empresa 2 (Empresa Teste 1763503996223) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 154.417 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 114.094 ms - 698[0m
  console.log
    âœ… Empresa 3 (Empresa Teste 1763503996463) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

  console.log
    --- ConfiguraÃ§Ã£o multi-tenant concluÃ­da ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:66:17)

  console.log
    
    --- Criando transaÃ§Ãµes individuais para cada empresa ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:71:17)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9927f
[0mPOST /api/transactions [32m201[0m 49.258 ms - 437[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763503995981. ID: 691cef7cde026001a4e992a5

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9927f
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9928d
[0mPOST /api/transactions [32m201[0m 50.564 ms - 436[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763503996223. ID: 691cef7cde026001a4e992ac

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9928d
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9929b
[0mPOST /api/transactions [32m201[0m 48.494 ms - 429[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763503996463. ID: 691cef7cde026001a4e992b3

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:98:17)

  console.log
    
    Verificando a transaÃ§Ã£o 691cef7cde026001a4e992a5 da Empresa Teste 1763503995981

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691cef7cde026001a4e9929b
[0mGET /api/transactions/691cef7cde026001a4e992a5 [33m404[0m 26.298 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503996223 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691cef7cde026001a4e992a5 [33m404[0m 27.848 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503996463 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691cef7cde026001a4e992ac da Empresa Teste 1763503996223

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691cef7cde026001a4e992ac [33m404[0m 27.157 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503995981 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691cef7cde026001a4e992ac [33m404[0m 27.859 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503996463 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691cef7cde026001a4e992b3 da Empresa Teste 1763503996463

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691cef7cde026001a4e992b3 [33m404[0m 26.836 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503995981 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691cef7cde026001a4e992b3 [33m404[0m 26.930 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763503996223 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    --- Validando listagem de transaÃ§Ãµes ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:130:17)

[0mGET /api/transactions [32m200[0m 26.659 ms - 423[0m
  console.log
    - OK: Empresa Teste 1763503995981 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 27.217 ms - 422[0m
  console.log
    - OK: Empresa Teste 1763503996223 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 26.927 ms - 415[0m
  console.log
    - OK: Empresa Teste 1763503996463 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:148:17)

[0mDELETE /api/auth/users/691cef7cde026001a4e9927f [32m200[0m 76.270 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763503995981 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691cef7cde026001a4e9927f
[0mDELETE /api/auth/users/691cef7cde026001a4e9928d [32m200[0m 77.624 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763503996223 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691cef7cde026001a4e9928d
[0mDELETE /api/auth/users/691cef7cde026001a4e9929b [32m200[0m 75.432 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763503996463 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

PASS Testes/3-security/multi-tenant.test.js
  3. Teste de Isolamento de Dados (Multi-Tenant)
    âˆš deve criar uma transaÃ§Ã£o para cada empresa (167 ms)
    âˆš deve impedir que uma empresa acesse a transaÃ§Ã£o de outra (187 ms)
    âˆš deve garantir que cada empresa liste apenas suas prÃ³prias transaÃ§Ãµes (89 ms)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691cef7cde026001a4e9929b
[0mPOST /api/auth/register [32m201[0m 134.877 ms - 357[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 93.196 ms - 700[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 136.789 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 94.461 ms - 698[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 157.986 ms - 351[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 91.664 ms - 694[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
PASS Testes/3-security/persistence.test.js (24.22 s)
  Security: PersistÃªncia de Dados Manuais
    âˆš deve garantir que os usuÃ¡rios de teste manuais permaneÃ§am no banco apÃ³s a execuÃ§Ã£o de `npm test` (23777 ms)

[0mGET /api/reports/export/transactions-pdf [32m200[0m 66.345 ms - -[0m
[0mGET /api/reports/export/clients-pdf [32m200[0m 46.817 ms - -[0m
[0mGET /api/reports/export/invoice/691cef944a830fc41a34e79f [32m200[0m 57.943 ms - -[0m
PASS Testes/4-reports/reports.test.js
  8. MÃ³dulo de RelatÃ³rios
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE TRANSAÃ‡Ã•ES (120 ms)
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE CLIENTES (59 ms)
    âˆš deve gerar um PDF vÃ¡lido para a FATURA (74 ms)

Test Suites: 9 passed, 9 total
Tests:       35 passed, 35 total
Snapshots:   0 total
Time:        29.674 s
Ran all test suites.

--- ğŸ§¹ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste temporÃ¡rios foram removidos.
âœ… Servidor e conexÃ£o com MongoDB encerrados (stopServer).
--- âœ… [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
