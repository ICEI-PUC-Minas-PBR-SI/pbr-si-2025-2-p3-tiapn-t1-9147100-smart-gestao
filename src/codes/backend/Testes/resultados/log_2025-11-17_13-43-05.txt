
--- üöÄ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permiss√µes de sistema...
Permiss√µes n√£o encontradas. Criando permiss√µes padr√£o...
Permiss√µes padr√£o criadas com sucesso!
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ (index) ‚îÇ Nome            ‚îÇ Descri√ß√£o                                                                                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0       ‚îÇ 'ROOT'          ‚îÇ 'Superusu√°rio. Acesso irrestrito a todos os dados e configura√ß√µes do sistema.'                   ‚îÇ
‚îÇ 1       ‚îÇ 'ADMIN_COMPANY' ‚îÇ 'Administrador de uma empresa. Pode gerenciar usu√°rios e todos os dados da sua pr√≥pria empresa.' ‚îÇ
‚îÇ 2       ‚îÇ 'USER_COMPANY'  ‚îÇ 'Usu√°rio padr√£o. Pode criar e gerenciar seus pr√≥prios dados dentro da empresa.'                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
‚úÖ [1/1] Conex√£o com o banco de dados estabelecida!
‚úÖ Servidor rodando na porta 5000
--- ‚úÖ [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:19924) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mGET /api/reports/export/transactions-pdf [32m200[0m 181.436 ms - 2580[0m
[0mGET /api/reports/export/clients-pdf [32m200[0m 49.970 ms - 2524[0m
[0mGET /api/reports/export/invoice/691b509cd67ad777ec1882f6 [32m200[0m 61.180 ms - 2615[0m
FAIL Testes/4-reports/reports.test.js
  8. M√≥dulo de Relat√≥rios
    √ó deve gerar um PDF v√°lido para o RELAT√ìRIO DE TRANSA√á√ïES (219 ms)
    √ó deve gerar um PDF v√°lido para o RELAT√ìRIO DE CLIENTES (54 ms)
    √ó deve gerar um PDF v√°lido para a FATURA (64 ms)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve gerar um PDF v√°lido para o RELAT√ìRIO DE TRANSA√á√ïES

    TypeError: pdfParse.default is not a function

    [0m [90m 23 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 24 |[39m     expect(response[33m.[39mheaders[[32m'content-type'[39m])[33m.[39mtoBe([32m'application/pdf'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m pdfParse[33m.[39m[36mdefault[39m(response[33m.[39mdata)[33m;[39m
     [90m    |[39m                                        [31m[1m^[22m[39m
     [90m 26 |[39m     expect(data[33m.[39mnumpages)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 27 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain([32m'Relat√≥rio de Transa√ß√µes'[39m)[33m;[39m
     [90m 28 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain(companyA[33m.[39mname)[33m;[39m[0m

      at Object.<anonymous> (Testes/4-reports/reports.test.js:25:40)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve gerar um PDF v√°lido para o RELAT√ìRIO DE CLIENTES

    TypeError: pdfParse.default is not a function

    [0m [90m 37 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 38 |[39m     expect(response[33m.[39mheaders[[32m'content-type'[39m])[33m.[39mtoBe([32m'application/pdf'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 39 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m pdfParse[33m.[39m[36mdefault[39m(response[33m.[39mdata)[33m;[39m
     [90m    |[39m                                        [31m[1m^[22m[39m
     [90m 40 |[39m     expect(data[33m.[39mnumpages)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 41 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain([32m'Relat√≥rio de Clientes'[39m)[33m;[39m
     [90m 42 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain(companyA[33m.[39mtestClient[33m.[39mname)[33m;[39m[0m

      at Object.<anonymous> (Testes/4-reports/reports.test.js:39:40)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve gerar um PDF v√°lido para a FATURA

    TypeError: pdfParse.default is not a function

    [0m [90m 51 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 52 |[39m     expect(response[33m.[39mheaders[[32m'content-type'[39m])[33m.[39mtoBe([32m'application/pdf'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 53 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m pdfParse[33m.[39m[36mdefault[39m(response[33m.[39mdata)[33m;[39m
     [90m    |[39m                                        [31m[1m^[22m[39m
     [90m 54 |[39m     expect(data[33m.[39mnumpages)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 55 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain([32m'Fatura'[39m)[33m;[39m
     [90m 56 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain(companyA[33m.[39mtestTransaction[33m.[39mdescription)[33m;[39m[0m

      at Object.<anonymous> (Testes/4-reports/reports.test.js:53:40)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 3 total
Snapshots:   0 total
Time:        1.841 s
Ran all test suites matching Testes/4-reports.

--- üßπ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste tempor√°rios foram removidos.
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
