
--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
(node:24276) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
GET /api/reports/export/transactions-pdf 200 103.626 ms - -
GET /api/reports/export/clients-pdf 200 59.609 ms - -
GET /api/reports/export/invoice/6915448df5abdbbd19e2c4ea 200 64.226 ms - -

--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
FAIL Testes/4-reports/reports.test.js
  8. M√≥dulo de Relat√≥rios
    √ó deve chamar o servi√ßo de PDF com os dados corretos para o RELAT√ìRIO DE TRANSA√á√ïES (129 ms)
    √ó deve chamar o servi√ßo de PDF com os dados corretos para o RELAT√ìRIO DE CLIENTES (68 ms)
    √ó deve chamar o servi√ßo de PDF com os dados corretos para a FATURA (68 ms)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve chamar o servi√ßo de PDF com os dados corretos para o RELAT√ìRIO DE TRANSA√á√ïES

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      50 |     });
      51 |
    > 52 |     expect(generateFinancialReportPDF).toHaveBeenCalled();
         |                                        ^
      53 |     const capturedData = generateFinancialReportPDF.mock.calls[0][0];
      54 |     expect(capturedData.company.name).toBe(companyA.name);
      55 |     expect(capturedData.transactions).toBeInstanceOf(Array);

      at Object.toHaveBeenCalled (Testes/4-reports/reports.test.js:52:40)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve chamar o servi√ßo de PDF com os dados corretos para o RELAT√ìRIO DE CLIENTES

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      67 |     });
      68 |
    > 69 |     expect(generateClientsReportPDF).toHaveBeenCalled();
         |                                      ^
      70 |     const capturedData = generateClientsReportPDF.mock.calls[0][0];
      71 |     expect(capturedData.company.name).toBe(companyA.name);
      72 |     expect(capturedData.clients).toBeInstanceOf(Array);

      at Object.toHaveBeenCalled (Testes/4-reports/reports.test.js:69:38)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve chamar o servi√ßo de PDF com os dados corretos para a FATURA

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      84 |     });
      85 |
    > 86 |     expect(generateInvoicePDF).toHaveBeenCalled();
         |                                ^
      87 |     const capturedData = generateInvoicePDF.mock.calls[0][0];
      88 |     expect(capturedData.company.name).toBe(companyA.name);
      89 |     expect(capturedData.transaction.description).toBe(companyA.testTransaction.description);

      at Object.toHaveBeenCalled (Testes/4-reports/reports.test.js:86:32)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
  console.log
    
    --- Configurando 3 empresas para o teste multi-tenant ---

      at Object.log (Testes/3-security/multi-tenant.test.js:19:17)

POST /api/auth/register 201 137.128 ms - 82
[LOG] A√ß√£o: REGISTER_COMPANY_USER | Usu√°rio: N/A
POST /api/auth/login 200 107.113 ms - 628
  console.log
    ‚úÖ Empresa 1 (Empresa Teste 1763001487187) cadastrada e logada.

      at Object.log (Testes/3-security/multi-tenant.test.js:48:21)

[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
POST /api/auth/register 201 136.176 ms - 82
[LOG] A√ß√£o: REGISTER_COMPANY_USER | Usu√°rio: N/A
POST /api/auth/login 200 93.821 ms - 628
  console.log
    ‚úÖ Empresa 2 (Empresa Teste 1763001487457) cadastrada e logada.

      at Object.log (Testes/3-security/multi-tenant.test.js:48:21)

[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
POST /api/auth/register 201 136.179 ms - 82
[LOG] A√ß√£o: REGISTER_COMPANY_USER | Usu√°rio: N/A
POST /api/auth/login 200 93.796 ms - 628
  console.log
    ‚úÖ Empresa 3 (Empresa Teste 1763001487694) cadastrada e logada.

      at Object.log (Testes/3-security/multi-tenant.test.js:48:21)

  console.log
    --- Configura√ß√£o multi-tenant conclu√≠da ---

      at Object.log (Testes/3-security/multi-tenant.test.js:50:17)

  console.log
    
    --- Criando transa√ß√µes individuais para cada empresa ---

      at Object.log (Testes/3-security/multi-tenant.test.js:55:17)

[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c524
POST /api/transactions 201 50.250 ms - 421
  console.log
    Transa√ß√£o criada para Empresa Teste 1763001487187. ID: 6915448ff5abdbbd19e2c54a

      at Object.log (Testes/3-security/multi-tenant.test.js:76:21)

[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c524
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c532
POST /api/transactions 201 50.933 ms - 420
  console.log
    Transa√ß√£o criada para Empresa Teste 1763001487457. ID: 69154490f5abdbbd19e2c551

      at Object.log (Testes/3-security/multi-tenant.test.js:76:21)

[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c532
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c540
POST /api/transactions 201 51.329 ms - 413
  console.log
    Transa√ß√£o criada para Empresa Teste 1763001487694. ID: 69154490f5abdbbd19e2c558

      at Object.log (Testes/3-security/multi-tenant.test.js:76:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.log (Testes/3-security/multi-tenant.test.js:82:17)

  console.log
    
    Verificando a transa√ß√£o 6915448ff5abdbbd19e2c54a da Empresa Teste 1763001487187

      at Object.log (Testes/3-security/multi-tenant.test.js:89:21)

[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 6915448ff5abdbbd19e2c540
GET /api/transactions/6915448ff5abdbbd19e2c54a 404 32.683 ms - 71
  console.log
    - OK: Empresa Teste 1763001487457 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

GET /api/transactions/6915448ff5abdbbd19e2c54a 404 28.459 ms - 71
  console.log
    - OK: Empresa Teste 1763001487694 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

  console.log
    
    Verificando a transa√ß√£o 69154490f5abdbbd19e2c551 da Empresa Teste 1763001487457

      at Object.log (Testes/3-security/multi-tenant.test.js:89:21)

GET /api/transactions/69154490f5abdbbd19e2c551 404 29.558 ms - 71
  console.log
    - OK: Empresa Teste 1763001487187 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

GET /api/transactions/69154490f5abdbbd19e2c551 404 27.150 ms - 71
  console.log
    - OK: Empresa Teste 1763001487694 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

  console.log
    
    Verificando a transa√ß√£o 69154490f5abdbbd19e2c558 da Empresa Teste 1763001487694

      at Object.log (Testes/3-security/multi-tenant.test.js:89:21)

GET /api/transactions/69154490f5abdbbd19e2c558 404 27.061 ms - 71
  console.log
    - OK: Empresa Teste 1763001487187 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

GET /api/transactions/69154490f5abdbbd19e2c558 404 27.319 ms - 71
  console.log
    - OK: Empresa Teste 1763001487457 foi bloqueada (Status 404).

      at Object.log (Testes/3-security/multi-tenant.test.js:107:29)

  console.log
    
    --- Validando listagem de transa√ß√µes ---

      at Object.log (Testes/3-security/multi-tenant.test.js:114:17)

GET /api/transactions 200 27.943 ms - 423
  console.log
    - OK: Empresa Teste 1763001487187 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (Testes/3-security/multi-tenant.test.js:126:21)

GET /api/transactions 200 27.678 ms - 422
  console.log
    - OK: Empresa Teste 1763001487457 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (Testes/3-security/multi-tenant.test.js:126:21)

GET /api/transactions 200 27.472 ms - 415
  console.log
    - OK: Empresa Teste 1763001487694 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (Testes/3-security/multi-tenant.test.js:126:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.log (Testes/3-security/multi-tenant.test.js:132:17)

DELETE /api/auth/users/6915448ff5abdbbd19e2c524 200 83.664 ms - 80
  console.log
    - ‚úÖ Empresa Empresa Teste 1763001487187 e dados associados exclu√≠dos com sucesso.

      at Object.log (Testes/3-security/multi-tenant.test.js:139:25)

[LOG] A√ß√£o: DELETE_USER_BY_ID | Usu√°rio: 6915448ff5abdbbd19e2c524
DELETE /api/auth/users/6915448ff5abdbbd19e2c532 200 81.336 ms - 80
  console.log
    - ‚úÖ Empresa Empresa Teste 1763001487457 e dados associados exclu√≠dos com sucesso.

      at Object.log (Testes/3-security/multi-tenant.test.js:139:25)

[LOG] A√ß√£o: DELETE_USER_BY_ID | Usu√°rio: 6915448ff5abdbbd19e2c532
DELETE /api/auth/users/6915448ff5abdbbd19e2c540 200 82.055 ms - 80
  console.log
    - ‚úÖ Empresa Empresa Teste 1763001487694 e dados associados exclu√≠dos com sucesso.

      at Object.log (Testes/3-security/multi-tenant.test.js:139:25)


--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/3-security/multi-tenant.test.js
  3. Teste de Isolamento de Dados em Larga Escala (Multi-Tenant)
    ‚àö deve criar uma transa√ß√£o para cada empresa (180 ms)
    ‚àö deve impedir que uma empresa acesse a transa√ß√£o de outra (205 ms)
    ‚àö deve garantir que cada empresa liste apenas suas pr√≥prias transa√ß√µes (93 ms)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
[LOG] A√ß√£o: DELETE_USER_BY_ID | Usu√°rio: 6915448ff5abdbbd19e2c540
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
POST /api/clients 201 29.962 ms - 337
[LOG] A√ß√£o: CREATE_CLIENT | Usu√°rio: 69154491f5abdbbd19e2c59f
GET /api/clients 200 27.369 ms - 582
PUT /api/clients/69154491f5abdbbd19e2c5ab 200 33.055 ms - 374
[LOG] A√ß√£o: UPDATE_CLIENT | Usu√°rio: 69154491f5abdbbd19e2c59f
DELETE /api/clients/69154491f5abdbbd19e2c5ab 200 30.589 ms - 70
GET /api/clients/69154491f5abdbbd19e2c5ab 404 0.850 ms - 175

--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/2-features/clients.test.js
  7. M√≥dulo de Clientes/Fornecedores
    ‚àö deve CRIAR um novo cliente com sucesso (43 ms)
    ‚àö deve LISTAR os clientes da empresa (32 ms)
    ‚àö deve ATUALIZAR um cliente existente (36 ms)
    ‚àö deve EXCLUIR um cliente existente (42 ms)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
[LOG] A√ß√£o: DELETE_CLIENT | Usu√°rio: 69154491f5abdbbd19e2c59f
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
  console.log
    
    --- Teste: Solicitar reset para e-mail inv√°lido ---

      at Object.log (Testes/1-auth/password.test.js:25:13)

POST /api/auth/forgot-password 404 13.926 ms - 39
  console.log
    ‚úÖ Falhou como esperado para e-mail inexistente (Status 404).

      at Object.log (Testes/1-auth/password.test.js:34:15)

  console.log
    
    --- Teste: Gerar token de reset com sucesso ---

      at Object.log (Testes/1-auth/password.test.js:39:13)

POST /api/auth/forgot-password 200 31.408 ms - 140
  console.log
    ‚úÖ Token de reset gerado e salvo no banco de dados.

      at Object.log (Testes/1-auth/password.test.js:49:13)

  console.log
    
    --- Teste: Resetar senha com token v√°lido ---

      at Object.log (Testes/1-auth/password.test.js:53:13)

POST /api/auth/forgot-password 200 29.414 ms - 140
POST /api/auth/reset-password/2ed13c2bd06993a9e37a07fd6331e9bca7cc99405995e67fe60a77dd77fac5d3 200 96.027 ms - 41
  console.log
    ‚úÖ Senha resetada com sucesso via API.

      at Object.log (Testes/1-auth/password.test.js:70:13)

POST /api/auth/reset-password/2ed13c2bd06993a9e37a07fd6331e9bca7cc99405995e67fe60a77dd77fac5d3 400 13.211 ms - 42
  console.log
    ‚úÖ Token de reset foi invalidado no banco.

      at Object.log (Testes/1-auth/password.test.js:74:13)

POST /api/auth/login 200 96.648 ms - 604
  console.log
    ‚úÖ Login com a nova senha realizado com sucesso.

      at Object.log (Testes/1-auth/password.test.js:84:13)


--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/1-auth/password.test.js
  9. M√≥dulo de Recupera√ß√£o de Senha
    ‚àö deve falhar ao solicitar reset para um e-mail inexistente (38 ms)
    ‚àö deve gerar e salvar um token de reset para um e-mail v√°lido (36 ms)
    ‚àö deve resetar a senha com um token v√°lido e permitir login com a nova senha (248 ms)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
POST /api/transactions 201 47.058 ms - 452
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
POST /api/transactions 400 14.643 ms - 277
[LOG] A√ß√£o: CREATE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
GET /api/transactions 200 27.119 ms - 855
GET /api/transactions/69154494f5abdbbd19e2c611 200 26.992 ms - 452
[LOG] A√ß√£o: UPDATE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
PUT /api/transactions/69154494f5abdbbd19e2c611 200 49.301 ms - 452
[LOG] A√ß√£o: UPDATE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
[LOG] A√ß√£o: DELETE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
DELETE /api/transactions/69154494f5abdbbd19e2c611 200 50.003 ms - 73
[LOG] A√ß√£o: DELETE_TRANSACTION | Usu√°rio: 69154493f5abdbbd19e2c605
GET /api/transactions/69154494f5abdbbd19e2c611 404 29.539 ms - 71

--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/2-features/transactions.test.js
  4. M√≥dulo de Transa√ß√µes (CRUD)
    ‚àö deve CRIAR uma nova transa√ß√£o com sucesso (58 ms)
    ‚àö deve falhar ao tentar criar uma transa√ß√£o com dados inv√°lidos (24 ms)
    ‚àö deve LISTAR as transa√ß√µes do usu√°rio logado (30 ms)
    ‚àö deve OBTER uma transa√ß√£o espec√≠fica pelo ID (30 ms)
    ‚àö deve ATUALIZAR uma transa√ß√£o existente (53 ms)
    ‚àö deve EXCLUIR uma transa√ß√£o existente (92 ms)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
POST /api/auth/login 200 93.484 ms - 604
[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
POST /api/auth/login 200 98.191 ms - 604
[LOG] A√ß√£o: LOGIN_USER | Usu√°rio: N/A
POST /api/auth/logout 200 16.956 ms - 81

--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/1-auth/auth.test.js
  6. M√≥dulo de Autentica√ß√£o e Sess√£o (Stateful)
    ‚àö deve criar um SessionToken no banco de dados ap√≥s o login (105 ms)
    ‚àö deve invalidar o SessionToken no banco de dados ap√≥s o logout (121 ms)


--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
[LOG] A√ß√£o: LOGOUT_USER | Usu√°rio: N/A
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
Verificando permiss√µes de sistema...
Permiss√µes de sistema j√° existem. Nenhuma a√ß√£o necess√°ria.
‚úÖ Conex√£o com o banco estabelecida!
üöÄ Servidor rodando na porta 5000
üì° Verifique em: http://localhost:5000/api/health
   - [OK] Servidor iniciado em-processo para execu√ß√£o dos testes.
[LOG] A√ß√£o: CREATE_GOAL | Usu√°rio: 69154496f5abdbbd19e2c679
POST /api/goals 201 48.342 ms - 404
GET /api/goals 200 30.832 ms - 406
[LOG] A√ß√£o: UPDATE_GOAL | Usu√°rio: 69154496f5abdbbd19e2c679
PUT /api/goals/69154496f5abdbbd19e2c685 200 52.634 ms - 414
[LOG] A√ß√£o: DELETE_GOAL | Usu√°rio: 69154496f5abdbbd19e2c679
DELETE /api/goals/69154496f5abdbbd19e2c685 200 53.582 ms - 67
GET /api/goals/69154496f5abdbbd19e2c685 404 29.193 ms - 65

--- üßπ [ENV] Desconectando do banco de dados ---
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [ENV] Ambiente de teste finalizado ---
PASS Testes/2-features/goals.test.js
  5. M√≥dulo de Metas (CRUD)
    ‚àö deve CRIAR uma nova meta com sucesso (62 ms)
    ‚àö deve LISTAR as metas do usu√°rio logado (36 ms)
    ‚àö deve ATUALIZAR uma meta existente (63 ms)
    ‚àö deve EXCLUIR uma meta existente (108 ms)

Test Suites: 1 failed, 6 passed, 7 total
Tests:       3 failed, 22 passed, 25 total
Snapshots:   0 total
Time:        11.953 s
Ran all test suites.

--- FIM DOS TESTES AUTOMATIZADOS (Status: Falha) ---
