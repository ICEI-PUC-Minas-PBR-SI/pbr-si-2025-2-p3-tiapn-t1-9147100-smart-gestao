
--- üöÄ Iniciando Setup Global de Testes ---
DEBUG test-setup: loginResponse.data.user.id = 690cad471f358a8cbca06a63, Typeof: string
DEBUG test-setup: loginResponse.data.user.companyId = 690cad471f358a8cbca06a61, Typeof: string
‚úÖ Empresa Padr√£o 1 criada para os testes.
DEBUG test-setup: loginResponse.data.user.id = 690cad471f358a8cbca06a6f, Typeof: string
DEBUG test-setup: loginResponse.data.user.companyId = 690cad471f358a8cbca06a6d, Typeof: string
‚úÖ Empresa Padr√£o 2 criada para os testes.
--- ‚úÖ Setup Global Conclu√≠do. Dados salvos em Testes\test-setup.json ---

  console.log
    
    --- Configurando 5 empresas para o teste multi-tenant ---

      at Object.log (multi-tenant.test.js:12:17)

  console.log
    ‚úÖ Empresa 1 (Empresa Teste 1762438472325) cadastrada e logada.

      at Object.log (multi-tenant.test.js:41:21)

  console.log
    ‚úÖ Empresa 2 (Empresa Teste 1762438472767) cadastrada e logada.

      at Object.log (multi-tenant.test.js:41:21)

  console.log
    ‚úÖ Empresa 3 (Empresa Teste 1762438473165) cadastrada e logada.

      at Object.log (multi-tenant.test.js:41:21)

  console.log
    ‚úÖ Empresa 4 (Empresa Teste 1762438473561) cadastrada e logada.

      at Object.log (multi-tenant.test.js:41:21)

  console.log
    ‚úÖ Empresa 5 (Empresa Teste 1762438474486) cadastrada e logada.

      at Object.log (multi-tenant.test.js:41:21)

  console.log
    --- Configura√ß√£o multi-tenant conclu√≠da ---

      at Object.log (multi-tenant.test.js:43:17)

  console.log
    
    --- Criando transa√ß√µes individuais para cada empresa ---

      at Object.log (multi-tenant.test.js:48:17)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762438472325. ID: 690cad4b1f358a8cbca06ab3

      at Object.log (multi-tenant.test.js:69:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762438472767. ID: 690cad4b1f358a8cbca06aba

      at Object.log (multi-tenant.test.js:69:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762438473165. ID: 690cad4b1f358a8cbca06ac1

      at Object.log (multi-tenant.test.js:69:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762438473561. ID: 690cad4c1f358a8cbca06ac8

      at Object.log (multi-tenant.test.js:69:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762438474486. ID: 690cad4c1f358a8cbca06acf

      at Object.log (multi-tenant.test.js:69:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.log (multi-tenant.test.js:75:17)

  console.log
    
    Verificando a transa√ß√£o 690cad4b1f358a8cbca06ab3 da Empresa Teste 1762438472325

      at Object.log (multi-tenant.test.js:82:21)

  console.log
    - OK: Empresa Teste 1762438472767 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473165 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473561 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438474486 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    
    Verificando a transa√ß√£o 690cad4b1f358a8cbca06aba da Empresa Teste 1762438472767

      at Object.log (multi-tenant.test.js:82:21)

  console.log
    - OK: Empresa Teste 1762438472325 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473165 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473561 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438474486 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    
    Verificando a transa√ß√£o 690cad4b1f358a8cbca06ac1 da Empresa Teste 1762438473165

      at Object.log (multi-tenant.test.js:82:21)

  console.log
    - OK: Empresa Teste 1762438472325 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438472767 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473561 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438474486 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    
    Verificando a transa√ß√£o 690cad4c1f358a8cbca06ac8 da Empresa Teste 1762438473561

      at Object.log (multi-tenant.test.js:82:21)

  console.log
    - OK: Empresa Teste 1762438472325 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438472767 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473165 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438474486 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    
    Verificando a transa√ß√£o 690cad4c1f358a8cbca06acf da Empresa Teste 1762438474486

      at Object.log (multi-tenant.test.js:82:21)

  console.log
    - OK: Empresa Teste 1762438472325 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438472767 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473165 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    - OK: Empresa Teste 1762438473561 foi bloqueada (Status 404).

      at Object.log (multi-tenant.test.js:100:29)

  console.log
    
    --- Validando listagem de transa√ß√µes ---

      at Object.log (multi-tenant.test.js:107:17)

  console.log
    - OK: Empresa Teste 1762438472325 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (multi-tenant.test.js:119:21)

  console.log
    - OK: Empresa Teste 1762438472767 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (multi-tenant.test.js:119:21)

  console.log
    - OK: Empresa Teste 1762438473165 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (multi-tenant.test.js:119:21)

  console.log
    - OK: Empresa Teste 1762438473561 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (multi-tenant.test.js:119:21)

  console.log
    - OK: Empresa Teste 1762438474486 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.log (multi-tenant.test.js:119:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.log (multi-tenant.test.js:125:17)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762438472325 exclu√≠da com sucesso.

      at Object.log (multi-tenant.test.js:133:33)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762438472767 exclu√≠da com sucesso.

      at Object.log (multi-tenant.test.js:133:33)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762438473165 exclu√≠da com sucesso.

      at Object.log (multi-tenant.test.js:133:33)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762438473561 exclu√≠da com sucesso.

      at Object.log (multi-tenant.test.js:133:33)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762438474486 exclu√≠da com sucesso.

      at Object.log (multi-tenant.test.js:133:33)

  console.log
    
    --- Criando transa√ß√£o para Empresa A ---

      at Object.log (isolamento.test.js:27:17)

  console.log
    Empresa A - Criar Transa√ß√£o (Status): 201

      at Object.log (isolamento.test.js:40:17)

  console.log
    Empresa A - Criar Transa√ß√£o (Corpo): {
      "companyId": "690cad471f358a8cbca06a61",
      "userId": "690cad471f358a8cbca06a63",
      "type": "expense",
      "description": "Transa√ß√£o de Teste Empresa A",
      "amount": 100,
      "date": "2025-11-06T14:14:40.877Z",
      "paymentMethod": "other",
      "status": "pending",
      "_id": "690cad501f358a8cbca06b44",
      "createdAt": "2025-11-06T14:14:40.920Z",
      "updatedAt": "2025-11-06T14:14:40.920Z",
      "__v": 0
    }

      at Object.log (isolamento.test.js:41:17)

  console.log
    Empresa A - ID da Transa√ß√£o Criada: 690cad501f358a8cbca06b44

      at Object.log (isolamento.test.js:45:17)

  console.log
    
    --- Tentando acessar transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.log (isolamento.test.js:48:17)

  console.log
    Enviando: GET para http://localhost:5000/api/transactions/690cad501f358a8cbca06b44 com token da Empresa B

      at Object.log (isolamento.test.js:49:17)

  console.log
    Empresa B - Acessar Transa√ß√£o (Status): 404

      at Object.log (isolamento.test.js:57:21)

  console.log
    Empresa B - Acessar Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.log (isolamento.test.js:58:21)

  console.log
    
    --- Tentando modificar transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.log (isolamento.test.js:68:17)

  console.log
    Enviando: PUT para http://localhost:5000/api/transactions/690cad501f358a8cbca06b44 com token da Empresa B

      at Object.log (isolamento.test.js:70:17)

  console.log
    Dados da atualiza√ß√£o: {
      "description": "Tentativa de Modifica√ß√£o pela Empresa B",
      "amount": 999
    }

      at Object.log (isolamento.test.js:71:17)

  console.log
    Empresa B - Modificar Transa√ß√£o (Status): 404

      at Object.log (isolamento.test.js:79:21)

  console.log
    Empresa B - Modificar Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.log (isolamento.test.js:80:21)

  console.log
    
    --- Tentando excluir transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.log (isolamento.test.js:86:17)

  console.log
    Enviando: DELETE para http://localhost:5000/api/transactions/690cad501f358a8cbca06b44 com token da Empresa B

      at Object.log (isolamento.test.js:87:17)

  console.log
    Empresa B - Excluir Transa√ß√£o (Status): 404

      at Object.log (isolamento.test.js:95:21)

  console.log
    Empresa B - Excluir Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.log (isolamento.test.js:96:21)

  console.log
    
    --- Tentando listar transa√ß√µes com token da Empresa B ---

      at Object.log (isolamento.test.js:104:17)

  console.log
    Enviando: GET para http://localhost:5000/api/transactions com token da Empresa B

      at Object.log (isolamento.test.js:105:17)

  console.log
    Empresa B - Listar Transa√ß√µes (Status): 200

      at Object.log (isolamento.test.js:113:17)

  console.log
    Empresa B - Listar Transa√ß√µes (Corpo): []

      at Object.log (isolamento.test.js:114:17)

  console.log
    
    --- Teste: Validar setup do usu√°rio ---

      at Object.log (api.test.js:28:17)

  console.log
    ‚úÖ Usu√°rio da Empresa A carregado do setup.

      at Object.log (api.test.js:31:17)

  console.log
    
    --- Teste: Barrar e-mail duplicado ---

      at Object.log (api.test.js:43:17)

  console.log
    ‚úÖ E-mail duplicado barrado com sucesso (Status 409).

      at Object.log (api.test.js:54:21)

  console.log
    
    --- Teste: Login com senha incorreta ---

      at Object.log (api.test.js:63:17)

  console.log
    ‚úÖ Login com senha incorreta falhou como esperado (Status 401).

      at Object.log (api.test.js:72:21)

  console.log
    
    --- Teste: Login com sucesso ---

      at Object.log (api.test.js:81:17)

  console.log
    ‚úÖ Login realizado com sucesso.

      at Object.log (api.test.js:90:17)

  console.log
    
    --- Teste: Acesso a rota protegida sem token ---

      at Object.log (api.test.js:94:17)

  console.log
    ‚úÖ Acesso sem token foi barrado como esperado (Status 401).

      at Object.log (api.test.js:104:21)

