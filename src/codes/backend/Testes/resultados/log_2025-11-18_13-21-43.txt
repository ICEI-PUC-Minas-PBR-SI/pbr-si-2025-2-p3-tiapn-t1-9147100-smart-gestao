
--- ğŸš€ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permissÃµes de sistema...
PermissÃµes nÃ£o encontradas. Criando permissÃµes padrÃ£o...
PermissÃµes padrÃ£o criadas com sucesso!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Nome            â”‚ DescriÃ§Ã£o                                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'ROOT'          â”‚ 'SuperusuÃ¡rio. Acesso irrestrito a todos os dados e configuraÃ§Ãµes do sistema.'                   â”‚
â”‚ 1       â”‚ 'ADMIN_COMPANY' â”‚ 'Administrador de uma empresa. Pode gerenciar usuÃ¡rios e todos os dados da sua prÃ³pria empresa.' â”‚
â”‚ 2       â”‚ 'USER_COMPANY'  â”‚ 'UsuÃ¡rio padrÃ£o. Pode criar e gerenciar seus prÃ³prios dados dentro da empresa.'                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â³ Iniciando servidor Smart GestÃ£o (startServer)...
ConexÃ£o com o MongoDB estabelecida com sucesso.
âœ… [1/1] ConexÃ£o com o banco de dados estabelecida!
âœ… Servidor rodando na porta 5000
--- âœ… [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:32572) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mPOST /api/auth/login [32m200[0m 107.665 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 99.252 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/logout [32m200[0m 20.016 ms - 108[0m
PASS Testes/1-auth/auth.test.js
  6. MÃ³dulo de AutenticaÃ§Ã£o e SessÃ£o (Stateful)
    âˆš deve criar um SessionToken no banco de dados apÃ³s o login (204 ms)
    âˆš deve invalidar o SessionToken no banco de dados apÃ³s o logout (128 ms)

  console.log
    
    --- Teste: Solicitar reset para e-mail invÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:33:13)

[LOG] AÃ§Ã£o: LOGOUT_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/forgot-password [33m404[0m 14.190 ms - 69[0m
  console.log
    âœ… Falhou como esperado para e-mail inexistente (Status 404).

      at Object.<anonymous> (Testes/1-auth/password.test.js:42:15)

  console.log
    
    --- Teste: Gerar token de reset com sucesso ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:51:13)

[0mPOST /api/auth/forgot-password [32m200[0m 32.874 ms - 164[0m
  console.log
    âœ… Token de reset gerado e salvo no banco de dados.

      at Object.<anonymous> (Testes/1-auth/password.test.js:61:13)

  console.log
    
    --- Teste: Resetar senha com token vÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:70:13)

[0mPOST /api/auth/forgot-password [32m200[0m 30.551 ms - 164[0m
[0mPOST /api/auth/reset-password/3943f07f9e87a36818506d8a6803fd0bda769f82955836cc1e82e827a2259322 [32m200[0m 113.668 ms - 68[0m
  console.log
    âœ… Senha resetada com sucesso via API.

      at Object.<anonymous> (Testes/1-auth/password.test.js:87:13)

[0mPOST /api/auth/reset-password/3943f07f9e87a36818506d8a6803fd0bda769f82955836cc1e82e827a2259322 [33m400[0m 14.218 ms - 72[0m
  console.log
    âœ… Token de reset foi invalidado no banco.

      at Object.<anonymous> (Testes/1-auth/password.test.js:91:13)

[0mPOST /api/auth/login [32m200[0m 120.812 ms - 688[0m
  console.log
    âœ… Login com a nova senha realizado com sucesso.

      at Object.<anonymous> (Testes/1-auth/password.test.js:101:13)

PASS Testes/1-auth/password.test.js
  9. MÃ³dulo de RecuperaÃ§Ã£o de Senha
    âˆš deve falhar ao solicitar reset para um e-mail inexistente (48 ms)
    âˆš deve gerar e salvar um token de reset para um e-mail vÃ¡lido (38 ms)
    âˆš deve resetar a senha com um token vÃ¡lido e permitir login com a nova senha (298 ms)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/clients [32m201[0m 32.300 ms - 329[0m
[LOG] AÃ§Ã£o: CREATE_CLIENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mGET /api/clients [32m200[0m 29.644 ms - 567[0m
[0mPUT /api/clients/691c9d1de1cb6e251cbb2d00 [32m200[0m 47.531 ms - 331[0m
[LOG] AÃ§Ã£o: UPDATE_CLIENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/clients/691c9d1de1cb6e251cbb2d00 [32m200[0m 45.881 ms - 70[0m
PASS Testes/2-features/clients.test.js
  7. MÃ³dulo de Clientes/Fornecedores
    âˆš deve CRIAR um novo cliente com sucesso (45 ms)
    âˆš deve LISTAR os clientes da empresa (33 ms)
    âˆš deve ATUALIZAR um cliente existente (52 ms)
    âˆš deve EXCLUIR um cliente existente (49 ms)

[LOG] AÃ§Ã£o: DELETE_CLIENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: CREATE_META | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/goals [32m201[0m 63.512 ms - 404[0m
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mGET /api/goals [32m200[0m 29.205 ms - 406[0m
[LOG] AÃ§Ã£o: UPDATE_META | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPUT /api/goals/691c9d1ee1cb6e251cbb2d11 [32m200[0m 62.775 ms - 414[0m
[LOG] AÃ§Ã£o: UPDATE_GOAL | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_META | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/goals/691c9d1ee1cb6e251cbb2d11 [32m200[0m 66.162 ms - 67[0m
[LOG] AÃ§Ã£o: DELETE_GOAL | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mGET /api/goals/null [33m404[0m 16.648 ms - 53[0m
PASS Testes/2-features/goals.test.js
  5. MÃ³dulo de Metas (CRUD)
    âˆš deve CRIAR uma nova meta com sucesso (78 ms)
    âˆš deve LISTAR as metas do usuÃ¡rio logado (31 ms)
    âˆš deve ATUALIZAR uma meta existente (67 ms)
    âˆš deve EXCLUIR uma meta existente (91 ms)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [32m201[0m 49.113 ms - 467[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [33m400[0m 14.291 ms - 277[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mGET /api/transactions [32m200[0m 27.060 ms - 854[0m
[0mGET /api/transactions/691c9d1ee1cb6e251cbb2d29 [32m200[0m 39.730 ms - 451[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPUT /api/transactions/691c9d1ee1cb6e251cbb2d29 [32m200[0m 60.198 ms - 452[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1ee1cb6e251cbb2d29 [32m200[0m 60.506 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mGET /api/transactions/691c9d1ee1cb6e251cbb2d29 [33m404[0m 38.491 ms - 71[0m
PASS Testes/2-features/transactions.test.js
  4. MÃ³dulo de TransaÃ§Ãµes (CRUD)
    âˆš deve CRIAR uma nova transaÃ§Ã£o com sucesso (61 ms)
    âˆš deve falhar ao tentar criar uma transaÃ§Ã£o com dados invÃ¡lidos (18 ms)
    âˆš deve LISTAR as transaÃ§Ãµes do usuÃ¡rio logado (30 ms)
    âˆš deve OBTER uma transaÃ§Ã£o especÃ­fica pelo ID (43 ms)
    âˆš deve ATUALIZAR uma transaÃ§Ã£o existente (64 ms)
    âˆš deve EXCLUIR uma transaÃ§Ã£o existente (104 ms)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [32m201[0m 47.280 ms - 446[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions/691c9d1fe1cb6e251cbb2d4a/upload [32m200[0m 65.836 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d4a/upload [32m200[0m 56.361 ms - 442[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d4a [32m200[0m 59.516 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [32m201[0m 48.575 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions/691c9d1fe1cb6e251cbb2d64/upload [32m200[0m 57.738 ms - 511[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d64/upload [32m200[0m 58.004 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d64 [32m200[0m 58.985 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [32m201[0m 46.636 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions/691c9d1fe1cb6e251cbb2d7e/upload [32m200[0m 57.315 ms - 512[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d7e/upload [32m200[0m 57.249 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d7e [32m200[0m 58.747 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions [32m201[0m 47.576 ms - 445[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions/691c9d1fe1cb6e251cbb2d98/upload [32m200[0m 60.527 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d98/upload [32m200[0m 60.873 ms - 441[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mDELETE /api/transactions/691c9d1fe1cb6e251cbb2d98 [32m200[0m 59.120 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691c9d1be1cb6e251cbb2cd3
[0mPOST /api/transactions/60d5f1f77c3d4a001f5e8e1z/upload [33m404[0m 13.867 ms - 53[0m
PASS Testes/2-features/uploads.test.js
  Feature: Uploads
    Upload de PDF
      âˆš Deve permitir o upload de um anexo (PDF) para uma transaÃ§Ã£o (73 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo (PDF) de uma transaÃ§Ã£o (59 ms)
    Upload de Imagem (PNG)
      âˆš Deve permitir o upload de um anexo de imagem (.png) para uma transaÃ§Ã£o (62 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.png) (61 ms)
    Upload de Imagem (JPG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpg) para uma transaÃ§Ã£o (61 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpg) (61 ms)
    Upload de Imagem (JPEG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpeg) para uma transaÃ§Ã£o (66 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpeg) (64 ms)
    CenÃ¡rios de Erro e Estruturais
      âˆš Deve retornar 404 ao tentar fazer upload para uma transaÃ§Ã£o inexistente (20 ms)

  console.log
    
    --- Configurando 3 empresas para o teste multi-tenant ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:35:17)

[0mPOST /api/auth/register [32m201[0m 136.487 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 93.056 ms - 698[0m
  console.log
    âœ… Empresa 1 (Empresa Teste 1763482912163) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 136.823 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 110.195 ms - 698[0m
  console.log
    âœ… Empresa 2 (Empresa Teste 1763482912404) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 146.391 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 91.694 ms - 698[0m
  console.log
    âœ… Empresa 3 (Empresa Teste 1763482912657) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

  console.log
    --- ConfiguraÃ§Ã£o multi-tenant concluÃ­da ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:66:17)

  console.log
    
    --- Criando transaÃ§Ãµes individuais para cada empresa ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:71:17)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2db7
[0mPOST /api/transactions [32m201[0m 46.842 ms - 437[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763482912163. ID: 691c9d20e1cb6e251cbb2ddd

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2db7
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dc5
[0mPOST /api/transactions [32m201[0m 46.532 ms - 436[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763482912404. ID: 691c9d20e1cb6e251cbb2de4

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dc5
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dd3
[0mPOST /api/transactions [32m201[0m 46.223 ms - 429[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763482912657. ID: 691c9d21e1cb6e251cbb2deb

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:98:17)

  console.log
    
    Verificando a transaÃ§Ã£o 691c9d20e1cb6e251cbb2ddd da Empresa Teste 1763482912163

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dd3
[0mGET /api/transactions/691c9d20e1cb6e251cbb2ddd [33m404[0m 25.731 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912404 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691c9d20e1cb6e251cbb2ddd [33m404[0m 26.252 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912657 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691c9d20e1cb6e251cbb2de4 da Empresa Teste 1763482912404

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691c9d20e1cb6e251cbb2de4 [33m404[0m 25.912 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912163 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691c9d20e1cb6e251cbb2de4 [33m404[0m 26.148 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912657 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691c9d21e1cb6e251cbb2deb da Empresa Teste 1763482912657

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691c9d21e1cb6e251cbb2deb [33m404[0m 24.911 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912163 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691c9d21e1cb6e251cbb2deb [33m404[0m 26.006 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763482912404 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    --- Validando listagem de transaÃ§Ãµes ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:130:17)

[0mGET /api/transactions [32m200[0m 26.497 ms - 423[0m
  console.log
    - OK: Empresa Teste 1763482912163 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 26.663 ms - 422[0m
  console.log
    - OK: Empresa Teste 1763482912404 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 26.093 ms - 415[0m
  console.log
    - OK: Empresa Teste 1763482912657 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:148:17)

[0mDELETE /api/auth/users/691c9d20e1cb6e251cbb2db7 [32m200[0m 75.421 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763482912163 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691c9d20e1cb6e251cbb2db7
[0mDELETE /api/auth/users/691c9d20e1cb6e251cbb2dc5 [32m200[0m 77.216 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763482912404 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dc5
[0mDELETE /api/auth/users/691c9d20e1cb6e251cbb2dd3 [32m200[0m 82.647 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763482912657 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

PASS Testes/3-security/multi-tenant.test.js
  3. Teste de Isolamento de Dados (Multi-Tenant)
    âˆš deve criar uma transaÃ§Ã£o para cada empresa (155 ms)
    âˆš deve impedir que uma empresa acesse a transaÃ§Ã£o de outra (172 ms)
    âˆš deve garantir que cada empresa liste apenas suas prÃ³prias transaÃ§Ãµes (86 ms)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691c9d20e1cb6e251cbb2dd3
[0mPOST /api/auth/register [32m201[0m 163.396 ms - 357[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 117.992 ms - 700[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 139.631 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 100.426 ms - 698[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 141.963 ms - 351[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 92.404 ms - 694[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
PASS Testes/3-security/persistence.test.js (20.893 s)
  Security: PersistÃªncia de Dados Manuais
    âˆš deve garantir que os usuÃ¡rios de teste manuais permaneÃ§am no banco apÃ³s a execuÃ§Ã£o de `npm test` (20259 ms)

[0mGET /api/reports/export/transactions-pdf [32m200[0m 60.634 ms - -[0m
[0mGET /api/reports/export/clients-pdf [32m200[0m 45.990 ms - -[0m
[0mGET /api/reports/export/invoice/691c9d34deedab1f04dc9c33 [32m200[0m 58.982 ms - -[0m
PASS Testes/4-reports/reports.test.js
  8. MÃ³dulo de RelatÃ³rios
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE TRANSAÃ‡Ã•ES (115 ms)
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE CLIENTES (58 ms)
    âˆš deve gerar um PDF vÃ¡lido para a FATURA (71 ms)

Test Suites: 9 passed, 9 total
Tests:       35 passed, 35 total
Snapshots:   0 total
Time:        26.535 s
Ran all test suites.

--- ğŸ§¹ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste temporÃ¡rios foram removidos.
âœ… Servidor e conexÃ£o com MongoDB encerrados (stopServer).
--- âœ… [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
