
--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.

--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    
    --- Configurando 3 empresas para o teste multi-tenant ---

      at Object.<anonymous> (multi-tenant.test.js:19:17)

  console.log
    ‚úÖ Empresa 1 (Empresa Teste 1762906129237) cadastrada e logada.

      at Object.<anonymous> (multi-tenant.test.js:48:21)

  console.log
    ‚úÖ Empresa 2 (Empresa Teste 1762906129492) cadastrada e logada.

      at Object.<anonymous> (multi-tenant.test.js:48:21)

  console.log
    ‚úÖ Empresa 3 (Empresa Teste 1762906129742) cadastrada e logada.

      at Object.<anonymous> (multi-tenant.test.js:48:21)

  console.log
    --- Configura√ß√£o multi-tenant conclu√≠da ---

      at Object.<anonymous> (multi-tenant.test.js:50:17)

  console.log
    
    --- Criando transa√ß√µes individuais para cada empresa ---

      at Object.<anonymous> (multi-tenant.test.js:55:17)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762906129237. ID: 6913d012775ea4a9585ba47a

      at Object.<anonymous> (multi-tenant.test.js:76:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762906129492. ID: 6913d012775ea4a9585ba481

      at Object.<anonymous> (multi-tenant.test.js:76:21)

  console.log
    Transa√ß√£o criada para Empresa Teste 1762906129742. ID: 6913d012775ea4a9585ba488

      at Object.<anonymous> (multi-tenant.test.js:76:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.<anonymous> (multi-tenant.test.js:82:17)

  console.log
    
    Verificando a transa√ß√£o 6913d012775ea4a9585ba47a da Empresa Teste 1762906129237

      at Object.<anonymous> (multi-tenant.test.js:89:21)

  console.log
    - OK: Empresa Teste 1762906129492 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    - OK: Empresa Teste 1762906129742 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    
    Verificando a transa√ß√£o 6913d012775ea4a9585ba481 da Empresa Teste 1762906129492

      at Object.<anonymous> (multi-tenant.test.js:89:21)

  console.log
    - OK: Empresa Teste 1762906129237 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    - OK: Empresa Teste 1762906129742 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    
    Verificando a transa√ß√£o 6913d012775ea4a9585ba488 da Empresa Teste 1762906129742

      at Object.<anonymous> (multi-tenant.test.js:89:21)

  console.log
    - OK: Empresa Teste 1762906129237 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    - OK: Empresa Teste 1762906129492 foi bloqueada (Status 404).

      at Object.<anonymous> (multi-tenant.test.js:107:29)

  console.log
    
    --- Validando listagem de transa√ß√µes ---

      at Object.<anonymous> (multi-tenant.test.js:114:17)

  console.log
    - OK: Empresa Teste 1762906129237 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.<anonymous> (multi-tenant.test.js:126:21)

  console.log
    - OK: Empresa Teste 1762906129492 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.<anonymous> (multi-tenant.test.js:126:21)

  console.log
    - OK: Empresa Teste 1762906129742 listou apenas sua pr√≥pria transa√ß√£o.

      at Object.<anonymous> (multi-tenant.test.js:126:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.<anonymous> (multi-tenant.test.js:132:17)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762906129237 e dados associados exclu√≠dos com sucesso.

      at Object.<anonymous> (multi-tenant.test.js:139:25)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762906129492 e dados associados exclu√≠dos com sucesso.

      at Object.<anonymous> (multi-tenant.test.js:139:25)

  console.log
    - ‚úÖ Empresa Empresa Teste 1762906129742 e dados associados exclu√≠dos com sucesso.

      at Object.<anonymous> (multi-tenant.test.js:139:25)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.

--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    
    --- Teste: Validar setup do usu√°rio ---

      at Object.<anonymous> (auth.legacy.test.js:32:17)

  console.log
    ‚úÖ Usu√°rio da Empresa A carregado do setup.

      at Object.<anonymous> (auth.legacy.test.js:35:17)

  console.log
    
    --- Teste: Login com sucesso ---

      at Object.<anonymous> (auth.legacy.test.js:78:17)

  console.log
    ‚úÖ Login realizado com sucesso.

      at Object.<anonymous> (auth.legacy.test.js:87:17)

  console.log
    
    --- Teste: Acesso a rota protegida sem token ---

      at Object.<anonymous> (auth.legacy.test.js:91:17)

  console.log
    ‚úÖ Acesso sem token foi barrado como esperado (Status 401).

      at Object.<anonymous> (auth.legacy.test.js:101:21)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    
    --- Criando transa√ß√£o para Empresa A ---

      at Object.<anonymous> (isolamento.test.js:31:17)

  console.log
    Empresa A - Criar Transa√ß√£o (Status): 201

      at Object.<anonymous> (isolamento.test.js:44:17)

  console.log
    Empresa A - Criar Transa√ß√£o (Corpo): {
      "companyId": "6913d0150691bc5ff592408a",
      "userId": "6913d0150691bc5ff592408c",
      "type": "expense",
      "description": "Transa√ß√£o de Teste Empresa A",
      "amount": 100,
      "date": "2025-11-12T00:08:53.613Z",
      "paymentMethod": "other",
      "status": "pending",
      "_id": "6913d015775ea4a9585ba4de",
      "createdAt": "2025-11-12T00:08:53.651Z",
      "updatedAt": "2025-11-12T00:08:53.651Z",
      "__v": 0
    }

      at Object.<anonymous> (isolamento.test.js:45:17)

  console.log
    Empresa A - ID da Transa√ß√£o Criada: 6913d015775ea4a9585ba4de

      at Object.<anonymous> (isolamento.test.js:49:17)

  console.log
    
    --- Tentando acessar transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.<anonymous> (isolamento.test.js:52:17)

  console.log
    Enviando: GET para http://localhost:5000/api/transactions/6913d015775ea4a9585ba4de com token da Empresa B

      at Object.<anonymous> (isolamento.test.js:53:17)

  console.log
    Empresa B - Acessar Transa√ß√£o (Status): 404

      at Object.<anonymous> (isolamento.test.js:61:21)

  console.log
    Empresa B - Acessar Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.<anonymous> (isolamento.test.js:62:21)

  console.log
    
    --- Tentando modificar transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.<anonymous> (isolamento.test.js:72:17)

  console.log
    Enviando: PUT para http://localhost:5000/api/transactions/6913d015775ea4a9585ba4de com token da Empresa B

      at Object.<anonymous> (isolamento.test.js:74:17)

  console.log
    Dados da atualiza√ß√£o: {
      "description": "Tentativa de Modifica√ß√£o pela Empresa B",
      "amount": 999
    }

      at Object.<anonymous> (isolamento.test.js:75:17)

  console.log
    Empresa B - Modificar Transa√ß√£o (Status): 404

      at Object.<anonymous> (isolamento.test.js:83:21)

  console.log
    Empresa B - Modificar Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.<anonymous> (isolamento.test.js:84:21)

  console.log
    
    --- Tentando excluir transa√ß√£o da Empresa A com token da Empresa B ---

      at Object.<anonymous> (isolamento.test.js:90:17)

  console.log
    Enviando: DELETE para http://localhost:5000/api/transactions/6913d015775ea4a9585ba4de com token da Empresa B

      at Object.<anonymous> (isolamento.test.js:91:17)

  console.log
    Empresa B - Excluir Transa√ß√£o (Status): 404

      at Object.<anonymous> (isolamento.test.js:99:21)

  console.log
    Empresa B - Excluir Transa√ß√£o (Corpo): {
      "message": "Transaction n√£o encontrada"
    }

      at Object.<anonymous> (isolamento.test.js:100:21)

  console.log
    
    --- Tentando listar transa√ß√µes com token da Empresa B ---

      at Object.<anonymous> (isolamento.test.js:108:17)

  console.log
    Enviando: GET para http://localhost:5000/api/transactions com token da Empresa B

      at Object.<anonymous> (isolamento.test.js:109:17)

  console.log
    Empresa B - Listar Transa√ß√µes (Status): 200

      at Object.<anonymous> (isolamento.test.js:117:17)

  console.log
    Empresa B - Listar Transa√ß√µes (Corpo): []

      at Object.<anonymous> (isolamento.test.js:118:17)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    
    --- Teste: Validar setup do usu√°rio ---

      at Object.<anonymous> (api.test.js:29:17)

  console.log
    ‚úÖ Usu√°rio da Empresa A carregado do setup.

      at Object.<anonymous> (api.test.js:32:17)

  console.log
    
    --- Teste: Barrar e-mail duplicado ---

      at Object.<anonymous> (api.test.js:44:17)

  console.log
    ‚úÖ E-mail duplicado barrado com sucesso (Status 409).

      at Object.<anonymous> (api.test.js:55:21)

  console.log
    
    --- Teste: Login com senha incorreta ---

      at Object.<anonymous> (api.test.js:64:17)

  console.log
    ‚úÖ Login com senha incorreta falhou como esperado (Status 401).

      at Object.<anonymous> (api.test.js:73:21)

  console.log
    
    --- Teste: Login com sucesso ---

      at Object.<anonymous> (api.test.js:82:17)

  console.log
    ‚úÖ Login realizado com sucesso.

      at Object.<anonymous> (api.test.js:91:17)

  console.log
    
    --- Teste: Acesso a rota protegida sem token ---

      at Object.<anonymous> (api.test.js:95:17)

  console.log
    ‚úÖ Acesso sem token foi barrado como esperado (Status 401).

      at Object.<anonymous> (api.test.js:105:21)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.

--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.

--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.

--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    Executando teste para: RF-009 - CRIAR Cliente (Pendente)

      at Object.<anonymous> (clients.test.js:27:13)

  console.log
    ‚û°Ô∏è  [PASS] Resposta da API: 201, Cliente criado com ID: 6913d01a775ea4a9585ba539

      at Object.<anonymous> (clients.test.js:43:13)

  console.log
    Executando teste para: RF-009 - LISTAR Clientes (Pendente)

      at Object.<anonymous> (clients.test.js:47:13)

  console.log
    ‚û°Ô∏è  [PASS] Resposta da API: 200, 1 cliente(s) listado(s).

      at Object.<anonymous> (clients.test.js:56:13)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- üöÄ [ETAPA 1 de 4] Iniciando Ambiente de Teste (Jest Environment) ---
   - [PROCESSO] Lendo configura√ß√£o do banco de dados de teste...
   - [ATEN√á√ÉO] Usando banco de dados de DESENVOLVIMENTO para os testes. As cole√ß√µes ser√£o limpas.

--- üöÄ [ETAPA 2 de 4] Limpando e populando o banco de dados de TESTE ---
   - [OK] Dados de teste (empresas e usu√°rios) criados e salvos em test-setup.json.
  console.log
    ‚û°Ô∏è  [PASS] Resposta da API: 200, PDF recebido com 1375 bytes e salvo em: F:\Programacao\GitHub\pbr-si-2025-2-p3-tiapn-t1-9147100-smart-gestao\src\codes\backend\Testes\PDFs\pdf_teste_2025-11-11_21-08-59.pdf

      at Object.<anonymous> (reports.test.js:57:13)


--- üßπ [ENV] Desconectando do banco de dados ---
--- ‚úÖ [ENV] Ambiente de teste finalizado ---

--- FIM DOS TESTES AUTOMATIZADOS ---
