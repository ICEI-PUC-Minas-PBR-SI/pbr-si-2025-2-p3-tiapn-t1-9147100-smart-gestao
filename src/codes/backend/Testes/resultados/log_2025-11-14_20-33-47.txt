
--- ðŸš€ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permissÃµes de sistema...
PermissÃµes nÃ£o encontradas. Criando permissÃµes padrÃ£o...
PermissÃµes padrÃ£o criadas com sucesso!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Nome            â”‚ DescriÃ§Ã£o                                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'ROOT'          â”‚ 'SuperusuÃ¡rio. Acesso irrestrito a todos os dados e configuraÃ§Ãµes do sistema.'                   â”‚
â”‚ 1       â”‚ 'ADMIN_COMPANY' â”‚ 'Administrador de uma empresa. Pode gerenciar usuÃ¡rios e todos os dados da sua prÃ³pria empresa.' â”‚
â”‚ 2       â”‚ 'USER_COMPANY'  â”‚ 'UsuÃ¡rio padrÃ£o. Pode criar e gerenciar seus prÃ³prios dados dentro da empresa.'                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â³ Iniciando servidor Smart GestÃ£o (startServer)...
ConexÃ£o com o MongoDB estabelecida com sucesso.
âœ… [1/1] ConexÃ£o com o banco de dados estabelecida!
âœ… Servidor rodando na porta 5000
--- âœ… [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:28272) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL Testes/4-reports/reports.test.js
  8. MÃ³dulo de RelatÃ³rios
    Ã— deve chamar o serviÃ§o de PDF com os dados corretos para o RELATÃ“RIO DE TRANSAÃ‡Ã•ES (1 ms)
    Ã— deve chamar o serviÃ§o de PDF com os dados corretos para o RELATÃ“RIO DE CLIENTES (1 ms)
    Ã— deve chamar o serviÃ§o de PDF com os dados corretos para a FATURA

  â— 8. MÃ³dulo de RelatÃ³rios â€º deve chamar o serviÃ§o de PDF com os dados corretos para o RELATÃ“RIO DE TRANSAÃ‡Ã•ES

    Must use import to load ES Module: F:\Programacao\GitHub\pbr-si-2025-2-p3-tiapn-t1-9147100-smart-gestao\src\codes\backend\services\pdfService.js

    [0m [90m 44 |[39m
     [90m 45 |[39m     [90m// Como o jest.mock estÃ¡ no topo, agora podemos pegar as funÃ§Ãµes mockadas.[39m
    [31m[1m>[22m[39m[90m 46 |[39m     [36mconst[39m pdfService [33m=[39m jest[33m.[39mrequireActual([32m'../../services/pdfService.js'[39m)[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 47 |[39m     generateFinancialReportPDF [33m=[39m pdfService[33m.[39mgenerateFinancialReportPDF[33m;[39m
     [90m 48 |[39m     generateClientsReportPDF [33m=[39m pdfService[33m.[39mgenerateClientsReportPDF[33m;[39m
     [90m 49 |[39m     generateInvoicePDF [33m=[39m pdfService[33m.[39mgenerateInvoicePDF[33m;[39m[0m

      at Runtime.requireModule (node_modules/jest-runtime/build/index.js:801:21)
      at Object.<anonymous> (Testes/4-reports/reports.test.js:46:29)

  â— 8. MÃ³dulo de RelatÃ³rios â€º deve chamar o serviÃ§o de PDF com os dados corretos para o RELATÃ“RIO DE CLIENTES

    Must use import to load ES Module: F:\Programacao\GitHub\pbr-si-2025-2-p3-tiapn-t1-9147100-smart-gestao\src\codes\backend\services\pdfService.js

    [0m [90m 44 |[39m
     [90m 45 |[39m     [90m// Como o jest.mock estÃ¡ no topo, agora podemos pegar as funÃ§Ãµes mockadas.[39m
    [31m[1m>[22m[39m[90m 46 |[39m     [36mconst[39m pdfService [33m=[39m jest[33m.[39mrequireActual([32m'../../services/pdfService.js'[39m)[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 47 |[39m     generateFinancialReportPDF [33m=[39m pdfService[33m.[39mgenerateFinancialReportPDF[33m;[39m
     [90m 48 |[39m     generateClientsReportPDF [33m=[39m pdfService[33m.[39mgenerateClientsReportPDF[33m;[39m
     [90m 49 |[39m     generateInvoicePDF [33m=[39m pdfService[33m.[39mgenerateInvoicePDF[33m;[39m[0m

      at Runtime.requireModule (node_modules/jest-runtime/build/index.js:801:21)
      at Object.<anonymous> (Testes/4-reports/reports.test.js:46:29)

  â— 8. MÃ³dulo de RelatÃ³rios â€º deve chamar o serviÃ§o de PDF com os dados corretos para a FATURA

    Must use import to load ES Module: F:\Programacao\GitHub\pbr-si-2025-2-p3-tiapn-t1-9147100-smart-gestao\src\codes\backend\services\pdfService.js

    [0m [90m 44 |[39m
     [90m 45 |[39m     [90m// Como o jest.mock estÃ¡ no topo, agora podemos pegar as funÃ§Ãµes mockadas.[39m
    [31m[1m>[22m[39m[90m 46 |[39m     [36mconst[39m pdfService [33m=[39m jest[33m.[39mrequireActual([32m'../../services/pdfService.js'[39m)[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 47 |[39m     generateFinancialReportPDF [33m=[39m pdfService[33m.[39mgenerateFinancialReportPDF[33m;[39m
     [90m 48 |[39m     generateClientsReportPDF [33m=[39m pdfService[33m.[39mgenerateClientsReportPDF[33m;[39m
     [90m 49 |[39m     generateInvoicePDF [33m=[39m pdfService[33m.[39mgenerateInvoicePDF[33m;[39m[0m

      at Runtime.requireModule (node_modules/jest-runtime/build/index.js:801:21)
      at Object.<anonymous> (Testes/4-reports/reports.test.js:46:29)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 3 total
Snapshots:   0 total
Time:        0.371 s
Ran all test suites matching Testes/4-reports.

--- ðŸ§¹ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste temporÃ¡rios foram removidos.
âœ… Servidor e conexÃ£o com MongoDB encerrados (stopServer).
--- âœ… [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
