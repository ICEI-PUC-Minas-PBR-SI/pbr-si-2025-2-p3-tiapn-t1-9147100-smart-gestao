
--- üöÄ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permiss√µes de sistema...
Permiss√µes n√£o encontradas. Criando permiss√µes padr√£o...
Permiss√µes padr√£o criadas com sucesso!
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ (index) ‚îÇ Nome            ‚îÇ Descri√ß√£o                                                                                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0       ‚îÇ 'ROOT'          ‚îÇ 'Superusu√°rio. Acesso irrestrito a todos os dados e configura√ß√µes do sistema.'                   ‚îÇ
‚îÇ 1       ‚îÇ 'ADMIN_COMPANY' ‚îÇ 'Administrador de uma empresa. Pode gerenciar usu√°rios e todos os dados da sua pr√≥pria empresa.' ‚îÇ
‚îÇ 2       ‚îÇ 'USER_COMPANY'  ‚îÇ 'Usu√°rio padr√£o. Pode criar e gerenciar seus pr√≥prios dados dentro da empresa.'                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚è≥ Iniciando servidor Smart Gest√£o (startServer)...
Conex√£o com o MongoDB estabelecida com sucesso.
‚úÖ [1/1] Conex√£o com o banco de dados estabelecida!
‚úÖ Servidor rodando na porta 5000
--- ‚úÖ [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:32460) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mGET /api/reports/export/transactions-pdf [32m200[0m 123.378 ms - 2484[0m
[0mGET /api/reports/export/clients-pdf [32m200[0m 102.310 ms - 2427[0m
[0mGET /api/reports/export/invoice/691b5e7a27500f06b521a0dd [32m200[0m 69.285 ms - 2532[0m
FAIL Testes/4-reports/reports.test.js

--- üßπ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste tempor√°rios foram removidos.
  8. M√≥dulo de Relat√≥rios
    ‚àö deve gerar um PDF v√°lido para o RELAT√ìRIO DE TRANSA√á√ïES (309 ms)
    √ó deve gerar um PDF v√°lido para o RELAT√ìRIO DE CLIENTES (111 ms)
    √ó deve gerar um PDF v√°lido para a FATURA (115 ms)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve gerar um PDF v√°lido para o RELAT√ìRIO DE CLIENTES



    [0m [90m 23 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 24 |[39m     expect(response[33m.[39mheaders[[32m'content-type'[39m])[33m.[39mtoBe([32m'application/pdf'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m pdf(response[33m.[39mdata)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 26 |[39m     expect(data[33m.[39mnumpages)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 27 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain([32m'Relat√≥rio de Transa√ß√µes'[39m)[33m;[39m
     [90m 28 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain(companyA[33m.[39mname)[33m;[39m[0m

      at UnknownErrorExceptionClosure (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/shared/util.js:400:37)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/shared/util.js:393:30)
      at __w_pdfjs_require__ (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:19:1)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/pdf.js:24:23)
      at __w_pdfjs_require__ (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:19:1)
      at node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:62:1
      at node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/pdf.js:91:10
      at webpackUniversalModuleDefinition (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/universalModuleDefinition:3:1)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/universalModuleDefinition:10:2)
      at PDF (node_modules/pdf-parse/lib/pdf-parse.js:62:29)
      at Object.pdf (Testes/4-reports/reports.test.js:25:24)

  ‚óè 8. M√≥dulo de Relat√≥rios ‚Ä∫ deve gerar um PDF v√°lido para a FATURA



    [0m [90m 23 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 24 |[39m     expect(response[33m.[39mheaders[[32m'content-type'[39m])[33m.[39mtoBe([32m'application/pdf'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m pdf(response[33m.[39mdata)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 26 |[39m     expect(data[33m.[39mnumpages)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 27 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain([32m'Relat√≥rio de Transa√ß√µes'[39m)[33m;[39m
     [90m 28 |[39m     expect(data[33m.[39mtext)[33m.[39mtoContain(companyA[33m.[39mname)[33m;[39m[0m

      at UnknownErrorExceptionClosure (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/shared/util.js:400:37)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/shared/util.js:393:30)
      at __w_pdfjs_require__ (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:19:1)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/src/pdf.js:24:23)
      at __w_pdfjs_require__ (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:19:1)
      at node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/bootstrap c9be985464785b4e5413:62:1
      at node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/pdf.js:91:10
      at webpackUniversalModuleDefinition (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/universalModuleDefinition:3:1)
      at Object.<anonymous> (node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/webpack:/webpack/universalModuleDefinition:10:2)
      at PDF (node_modules/pdf-parse/lib/pdf-parse.js:62:29)
      at Object.pdf (Testes/4-reports/reports.test.js:25:24)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 1 passed, 3 total
Snapshots:   0 total
Time:        1.628 s
Ran all test suites matching Testes/4-reports.
‚úÖ Servidor e conex√£o com MongoDB encerrados (stopServer).
--- ‚úÖ [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
