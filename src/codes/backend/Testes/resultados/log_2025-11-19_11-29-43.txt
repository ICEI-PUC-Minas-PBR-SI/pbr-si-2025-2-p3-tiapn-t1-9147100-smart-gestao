
--- ğŸš€ [GLOBAL SETUP] Iniciando ambiente de teste ---
Verificando permissÃµes de sistema...
PermissÃµes nÃ£o encontradas. Criando permissÃµes padrÃ£o...
PermissÃµes padrÃ£o criadas com sucesso!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Nome            â”‚ DescriÃ§Ã£o                                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'ROOT'          â”‚ 'SuperusuÃ¡rio. Acesso irrestrito a todos os dados e configuraÃ§Ãµes do sistema.'                   â”‚
â”‚ 1       â”‚ 'ADMIN_COMPANY' â”‚ 'Administrador de uma empresa. Pode gerenciar usuÃ¡rios e todos os dados da sua prÃ³pria empresa.' â”‚
â”‚ 2       â”‚ 'USER_COMPANY'  â”‚ 'UsuÃ¡rio padrÃ£o. Pode criar e gerenciar seus prÃ³prios dados dentro da empresa.'                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â³ Iniciando servidor Smart GestÃ£o (startServer)...
ConexÃ£o com o MongoDB estabelecida com sucesso.
âœ… [1/1] ConexÃ£o com o banco de dados estabelecida!
âœ… Servidor rodando na porta 5000
--- âœ… [GLOBAL SETUP] Ambiente pronto e servidor iniciado ---
(node:7868) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[0mPOST /api/auth/login [32m200[0m 102.656 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 93.923 ms - 688[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/logout [32m200[0m 21.486 ms - 108[0m
PASS Testes/1-auth/auth.test.js
  6. MÃ³dulo de AutenticaÃ§Ã£o e SessÃ£o (Stateful)
    âˆš deve criar um SessionToken no banco de dados apÃ³s o login (137 ms)
    âˆš deve invalidar o SessionToken no banco de dados apÃ³s o logout (125 ms)

  console.log
    
    --- Teste: Solicitar reset para e-mail invÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:33:13)

[LOG] AÃ§Ã£o: LOGOUT_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/forgot-password [33m404[0m 14.061 ms - 69[0m
  console.log
    âœ… Falhou como esperado para e-mail inexistente (Status 404).

      at Object.<anonymous> (Testes/1-auth/password.test.js:42:15)

  console.log
    
    --- Teste: Gerar token de reset com sucesso ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:51:13)

[0mPOST /api/auth/forgot-password [32m200[0m 31.961 ms - 164[0m
  console.log
    âœ… Token de reset gerado e salvo no banco de dados.

      at Object.<anonymous> (Testes/1-auth/password.test.js:61:13)

  console.log
    
    --- Teste: Resetar senha com token vÃ¡lido ---

      at Object.<anonymous> (Testes/1-auth/password.test.js:70:13)

[0mPOST /api/auth/forgot-password [32m200[0m 29.679 ms - 164[0m
[0mPOST /api/auth/reset-password/5499c84d69bc58ebafc5f5131a9e6fbc1ed08546b36a1cf0d49a1921d5c9d8bc [32m200[0m 95.709 ms - 68[0m
  console.log
    âœ… Senha resetada com sucesso via API.

      at Object.<anonymous> (Testes/1-auth/password.test.js:87:13)

[0mPOST /api/auth/reset-password/5499c84d69bc58ebafc5f5131a9e6fbc1ed08546b36a1cf0d49a1921d5c9d8bc [33m400[0m 13.619 ms - 72[0m
  console.log
    âœ… Token de reset foi invalidado no banco.

      at Object.<anonymous> (Testes/1-auth/password.test.js:91:13)

[0mPOST /api/auth/login [32m200[0m 96.808 ms - 688[0m
  console.log
    âœ… Login com a nova senha realizado com sucesso.

      at Object.<anonymous> (Testes/1-auth/password.test.js:101:13)

PASS Testes/1-auth/password.test.js
  9. MÃ³dulo de RecuperaÃ§Ã£o de Senha
    âˆš deve falhar ao solicitar reset para um e-mail inexistente (43 ms)
    âˆš deve gerar e salvar um token de reset para um e-mail vÃ¡lido (39 ms)
    âˆš deve resetar a senha com um token vÃ¡lido e permitir login com a nova senha (253 ms)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/goals [32m201[0m 48.839 ms - 455[0m
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 82.583 ms - 448[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/alerts [32m200[0m 34.877 ms - 72[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: AUTO_CREATE_ALERT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 110.399 ms - 445[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/alerts [32m200[0m 27.878 ms - 419[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 76.955 ms - 437[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/alerts [32m200[0m 26.861 ms - 419[0m
PASS Testes/2-features/alerts.test.js
  6. MÃ³dulo de Alertas de Metas
    âˆš RF-006: deve criar um alerta quando uma despesa ultrapassa a meta da categoria (436 ms)

[0mPOST /api/clients [32m201[0m 30.399 ms - 329[0m
[LOG] AÃ§Ã£o: CREATE_CLIENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/clients [32m200[0m 27.192 ms - 564[0m
[0mPUT /api/clients/691dd45ed14df989855d64c3 [32m200[0m 47.576 ms - 331[0m
[LOG] AÃ§Ã£o: UPDATE_CLIENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/clients/691dd45ed14df989855d64c3 [32m200[0m 43.099 ms - 70[0m
PASS Testes/2-features/clients.test.js
  7. MÃ³dulo de Clientes/Fornecedores
    âˆš deve CRIAR um novo cliente com sucesso (41 ms)
    âˆš deve LISTAR os clientes da empresa (29 ms)
    âˆš deve ATUALIZAR um cliente existente (50 ms)
    âˆš deve EXCLUIR um cliente existente (47 ms)

[LOG] AÃ§Ã£o: DELETE_CLIENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/goals [32m201[0m 48.264 ms - 404[0m
[LOG] AÃ§Ã£o: CREATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/goals [32m200[0m 27.152 ms - 792[0m
[LOG] AÃ§Ã£o: UPDATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPUT /api/goals/691dd45ed14df989855d64d4 [32m200[0m 63.673 ms - 414[0m
[LOG] AÃ§Ã£o: UPDATE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/goals/691dd45ed14df989855d64d4 [32m200[0m 59.626 ms - 67[0m
[0mGET /api/goals/null [33m404[0m 13.740 ms - 53[0m
PASS Testes/2-features/goals.test.js
  5. MÃ³dulo de Metas (CRUD)
    âˆš deve CRIAR uma nova meta com sucesso (59 ms)
    âˆš deve LISTAR as metas do usuÃ¡rio logado (30 ms)
    âˆš deve ATUALIZAR uma meta existente (67 ms)
    âˆš deve EXCLUIR uma meta existente (82 ms)

[LOG] AÃ§Ã£o: DELETE_GOAL | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 46.944 ms - 468[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [33m400[0m 14.866 ms - 277[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/transactions [32m200[0m 27.483 ms - 1930[0m
[0mGET /api/transactions/691dd45fd14df989855d64ec [32m200[0m 39.126 ms - 452[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPUT /api/transactions/691dd45fd14df989855d64ec [32m200[0m 59.744 ms - 452[0m
[LOG] AÃ§Ã£o: UPDATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd45fd14df989855d64ec [32m200[0m 64.578 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mGET /api/transactions/691dd45fd14df989855d64ec [33m404[0m 41.163 ms - 71[0m
PASS Testes/2-features/transactions.test.js
  4. MÃ³dulo de TransaÃ§Ãµes (CRUD)
    âˆš deve CRIAR uma nova transaÃ§Ã£o com sucesso (60 ms)
    âˆš deve falhar ao tentar criar uma transaÃ§Ã£o com dados invÃ¡lidos (20 ms)
    âˆš deve LISTAR as transaÃ§Ãµes do usuÃ¡rio logado (30 ms)
    âˆš deve OBTER uma transaÃ§Ã£o especÃ­fica pelo ID (41 ms)
    âˆš deve ATUALIZAR uma transaÃ§Ã£o existente (63 ms)
    âˆš deve EXCLUIR uma transaÃ§Ã£o existente (112 ms)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 47.832 ms - 446[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions/691dd45fd14df989855d650d/upload [32m200[0m 62.794 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd45fd14df989855d650d/upload [32m200[0m 56.875 ms - 442[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd45fd14df989855d650d [32m200[0m 62.289 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 60.836 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions/691dd460d14df989855d6527/upload [32m200[0m 59.522 ms - 512[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d6527/upload [32m200[0m 59.106 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d6527 [32m200[0m 74.390 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 66.285 ms - 444[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions/691dd460d14df989855d6542/upload [32m200[0m 62.060 ms - 512[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d6542/upload [32m200[0m 59.652 ms - 440[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d6542 [32m200[0m 59.889 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions [32m201[0m 58.359 ms - 445[0m
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions/691dd460d14df989855d655d/upload [32m200[0m 56.926 ms - 514[0m
[LOG] AÃ§Ã£o: UPLOAD_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d655d/upload [32m200[0m 57.545 ms - 441[0m
[LOG] AÃ§Ã£o: DELETE_ATTACHMENT | UsuÃ¡rio: 691dd45cd14df989855d646a
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mDELETE /api/transactions/691dd460d14df989855d655d [32m200[0m 60.928 ms - 73[0m
[LOG] AÃ§Ã£o: DELETE_TRANSACTION | UsuÃ¡rio: 691dd45cd14df989855d646a
[0mPOST /api/transactions/60d5f1f77c3d4a001f5e8e1z/upload [33m404[0m 13.552 ms - 53[0m
PASS Testes/2-features/uploads.test.js
  Feature: Uploads
    Upload de PDF
      âˆš Deve permitir o upload de um anexo (PDF) para uma transaÃ§Ã£o (69 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo (PDF) de uma transaÃ§Ã£o (60 ms)
    Upload de Imagem (PNG)
      âˆš Deve permitir o upload de um anexo de imagem (.png) para uma transaÃ§Ã£o (64 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.png) (64 ms)
    Upload de Imagem (JPG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpg) para uma transaÃ§Ã£o (72 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpg) (64 ms)
    Upload de Imagem (JPEG)
      âˆš Deve permitir o upload de um anexo de imagem (.jpeg) para uma transaÃ§Ã£o (60 ms)
      âˆš Deve permitir a exclusÃ£o de um anexo de imagem (.jpeg) (60 ms)
    CenÃ¡rios de Erro e Estruturais
      âˆš Deve retornar 404 ao tentar fazer upload para uma transaÃ§Ã£o inexistente (20 ms)

  console.log
    
    --- Configurando 3 empresas para o teste multi-tenant ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:35:17)

[0mPOST /api/auth/register [32m201[0m 133.874 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 94.478 ms - 698[0m
  console.log
    âœ… Empresa 1 (Empresa Teste 1763562592963) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 134.749 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 129.650 ms - 698[0m
  console.log
    âœ… Empresa 2 (Empresa Teste 1763562593206) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 140.698 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 94.320 ms - 698[0m
  console.log
    âœ… Empresa 3 (Empresa Teste 1763562593480) cadastrada e logada.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:64:21)

  console.log
    --- ConfiguraÃ§Ã£o multi-tenant concluÃ­da ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:66:17)

  console.log
    
    --- Criando transaÃ§Ãµes individuais para cada empresa ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:71:17)

[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d657d
[0mPOST /api/transactions [32m201[0m 45.951 ms - 437[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763562592963. ID: 691dd461d14df989855d65a3

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d657d
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d658b
[0mPOST /api/transactions [32m201[0m 48.975 ms - 436[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763562593206. ID: 691dd461d14df989855d65aa

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d658b
[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d6599
[0mPOST /api/transactions [32m201[0m 48.274 ms - 429[0m
  console.log
    TransaÃ§Ã£o criada para Empresa Teste 1763562593480. ID: 691dd461d14df989855d65b1

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:92:21)

  console.log
    
    --- Validando isolamento de dados entre todas as empresas ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:98:17)

  console.log
    
    Verificando a transaÃ§Ã£o 691dd461d14df989855d65a3 da Empresa Teste 1763562592963

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[LOG] AÃ§Ã£o: CREATE_TRANSACTION | UsuÃ¡rio: 691dd461d14df989855d6599
[0mGET /api/transactions/691dd461d14df989855d65a3 [33m404[0m 28.058 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562593206 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691dd461d14df989855d65a3 [33m404[0m 27.668 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562593480 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691dd461d14df989855d65aa da Empresa Teste 1763562593206

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691dd461d14df989855d65aa [33m404[0m 27.040 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562592963 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691dd461d14df989855d65aa [33m404[0m 27.649 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562593480 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    Verificando a transaÃ§Ã£o 691dd461d14df989855d65b1 da Empresa Teste 1763562593480

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:105:21)

[0mGET /api/transactions/691dd461d14df989855d65b1 [33m404[0m 26.990 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562592963 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

[0mGET /api/transactions/691dd461d14df989855d65b1 [33m404[0m 27.174 ms - 38[0m
  console.log
    - OK: Empresa Teste 1763562593206 foi bloqueada (Status 404).

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:123:29)

  console.log
    
    --- Validando listagem de transaÃ§Ãµes ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:130:17)

[0mGET /api/transactions [32m200[0m 27.813 ms - 423[0m
  console.log
    - OK: Empresa Teste 1763562592963 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 27.724 ms - 422[0m
  console.log
    - OK: Empresa Teste 1763562593206 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

[0mGET /api/transactions [32m200[0m 27.884 ms - 415[0m
  console.log
    - OK: Empresa Teste 1763562593480 listou apenas sua prÃ³pria transaÃ§Ã£o.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:142:21)

  console.log
    
    --- Limpando dados de teste (Teardown) ---

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:148:17)

[0mDELETE /api/auth/users/691dd461d14df989855d657d [32m200[0m 87.819 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763562592963 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691dd461d14df989855d657d
[0mDELETE /api/auth/users/691dd461d14df989855d658b [32m200[0m 85.502 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763562593206 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691dd461d14df989855d658b
[0mDELETE /api/auth/users/691dd461d14df989855d6599 [32m200[0m 87.422 ms - 107[0m
  console.log
    - âœ… Empresa Empresa Teste 1763562593480 e dados associados excluÃ­dos com sucesso.

      at Object.<anonymous> (Testes/3-security/multi-tenant.test.js:155:25)

PASS Testes/3-security/multi-tenant.test.js
  3. Teste de Isolamento de Dados (Multi-Tenant)
    âˆš deve criar uma transaÃ§Ã£o para cada empresa (164 ms)
    âˆš deve impedir que uma empresa acesse a transaÃ§Ã£o de outra (190 ms)
    âˆš deve garantir que cada empresa liste apenas suas prÃ³prias transaÃ§Ãµes (93 ms)

[LOG] AÃ§Ã£o: DELETE_USER_BY_ID | UsuÃ¡rio: 691dd461d14df989855d6599
[0mPOST /api/auth/register [32m201[0m 165.012 ms - 357[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 92.065 ms - 700[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 135.314 ms - 355[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 91.956 ms - 698[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/register [32m201[0m 136.529 ms - 351[0m
[LOG] AÃ§Ã£o: REGISTER_COMPANY_USER | UsuÃ¡rio: N/A
[0mPOST /api/auth/login [32m200[0m 95.268 ms - 694[0m
[LOG] AÃ§Ã£o: LOGIN_USER | UsuÃ¡rio: N/A
PASS Testes/3-security/persistence.test.js (19.871 s)
  Security: PersistÃªncia de Dados Manuais
    âˆš deve garantir que os usuÃ¡rios de teste manuais permaneÃ§am no banco apÃ³s a execuÃ§Ã£o de `npm test` (19432 ms)

[0mGET /api/reports/export/transactions-pdf [32m200[0m 57.755 ms - -[0m
[0mGET /api/reports/export/clients-pdf [32m200[0m 44.859 ms - -[0m
[0mGET /api/reports/export/invoice/691dd4757d006b1a17c967c7 [32m200[0m 54.853 ms - -[0m
PASS Testes/4-reports/reports.test.js
  8. MÃ³dulo de RelatÃ³rios
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE TRANSAÃ‡Ã•ES (103 ms)
    âˆš deve gerar um PDF vÃ¡lido para o RELATÃ“RIO DE CLIENTES (60 ms)
    âˆš deve gerar um PDF vÃ¡lido para a FATURA (65 ms)

Test Suites: 10 passed, 10 total
Tests:       36 passed, 36 total
Snapshots:   0 total
Time:        25.841 s
Ran all test suites.

--- ğŸ§¹ [GLOBAL TEARDOWN] Finalizando ambiente de teste ---
   - [OK] Dados de teste temporÃ¡rios foram removidos.
âœ… Servidor e conexÃ£o com MongoDB encerrados (stopServer).
--- âœ… [GLOBAL TEARDOWN] Ambiente finalizado com sucesso ---
